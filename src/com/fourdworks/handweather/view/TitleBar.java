package com.fourdworks.handweather.view;import android.content.Context;import android.util.AttributeSet;import android.view.LayoutInflater;import android.view.View;import android.widget.FrameLayout;import android.widget.ImageButton;import android.widget.TextView;import com.fourdworks.handweather.R;import com.fourdworks.handweather.activity.BaseActivity;/** * 功能:自定义标题视图 作者:mike 时间：2015-11-3 上午8:58:36 修改: */public class TitleBar extends FrameLayout {	// 控件	private ImageButton btnLeft, btnRight;// 左，右图标	private TextView txtTitle;// 标题		/**	 * 在代码中动态初始化	 * 	 * @param context	 */	public TitleBar(Context context) {		super(context);		// TODO Auto-generated constructor stub		initUi();	}	/**	 * 在布局（xml）中定义	 * 	 * @param context	 * @param attrs	 */	public TitleBar(Context context, AttributeSet attrs) {		super(context, attrs);		// TODO Auto-generated constructor stub		initUi();	}	/**	 * 在布局（xml）中定义	 * 	 * @param context	 *            上下文	 * @param attrs	 *            属性集合	 * @param defStyle	 *            风格	 */	public TitleBar(Context context, AttributeSet attrs, int defStyle) {		super(context, attrs, defStyle);		// TODO Auto-generated constructor stub		initUi();	}	// 定义接口	//定义OnLeftIconClickListener的变量	private OnLeftIconClickListener onLeftIconClickListener;		/**	 * 功能:左边按钮的单击监听器接口 作者:mike 时间：2015-11-3 上午9:32:00 修改:	 */	public interface OnLeftIconClickListener {		public void onLeftIconClick(ImageButton v);	}		/**	 * 实现OnLeftIconClickListener接口	 * @param onLeftIconClickListener	 */	public void setOnLeftIconClickListener(			OnLeftIconClickListener onLeftIconClickListener) {		this.onLeftIconClickListener = onLeftIconClickListener;	}		/**	 * 初始化界面	 */	private void initUi() {		// TODO Auto-generated method stub		// 将布局文件嵌入到当前视图中		LayoutInflater.from(getContext()).inflate(R.layout.view_titlebar, this);		// View convertView =		// LayoutInflater.from(getContext()).inflate(R.layout.view_titlebar,null);		// this.addView(convertView);		// 初始化控件		btnLeft = (ImageButton) findViewById(R.id.left);// 左图标		btnRight = (ImageButton) findViewById(R.id.right);// 右图标		txtTitle = (TextView) findViewById(R.id.title);// 标题				// 为左侧按钮设置单击事件		// 1.默认事件是返回上一级Activity（有）		// 2.特殊情况单独设置		btnLeft.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View v) {				// TODO Auto-generated method stub				if(onLeftIconClickListener == null){//默认事件					((BaseActivity)getContext()).finish();				}else{//特殊情况单独设置					onLeftIconClickListener.onLeftIconClick(btnLeft);				}			}		});	}		/**	 * 设置标题	 * 	 * @param title	 */	public void settitle(String title) {		txtTitle.setText(title);	}	/**	 * 设置左边的图标	 * 	 * @param drawableId	 */	public void setLeftIcon(int resId) {		btnLeft.setImageResource(resId);	}	/**	 * 设置右边的图标	 * 	 * @param drawableId	 */	public void setRightIcon(int resId) {		btnRight.setImageResource(resId);	}	/**	 * 显示右边的图标	 */	public void showRightIcon() {		btnRight.setVisibility(View.VISIBLE);	}	/**	 * 获得右边按钮	 * @return	 */	public ImageButton getBtnRight() {		return btnRight;	}}